<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Report Scam & Rate Page</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
body {
  background-color: #0B1623;
  font-family: "Poppins", sans-serif;
  padding: 40px;
  color: #FFFFFF;
}

.card-custom {
  background-color: #1B263B;
  color: #FFFFFF;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  transition: 0.3s ease;
  max-width: 700px;
  margin: auto;
  padding: 25px;
}

.card-custom:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.4);
}

.highlight {
  color: #F4B400;
  font-weight: 600;
}

.icon {
  color: #F4B400;
  margin-right: 8px;
}

.note {
  font-size: 0.9rem;
  color: #B0B0B0;
  border-left: 4px solid #F4B400; /* yellow accent instead of blue */
  padding-left: 10px;
  margin-top: 15px;
}

.stars {
  cursor: pointer;
  font-size: 1.8rem;
  color: #555;
  transition: color 0.2s ease-in-out;
}

.stars .bi-star-fill.active {
  color: #F4B400;
}

#rating-value {
  font-weight: 500;
  color: #F4B400;
  margin-top: 5px;
}

textarea {
  resize: none;
  background-color: #0F2133;
  border: 1px solid #24344E;
  color: #FFFFFF;
  border-radius: 10px;
  padding: 10px;
}

textarea::placeholder {
  color: #888;
}

/* Submit Button */
button,
.btn-primary,
.submit-btn {
  background-color: #F4B400;
  color: #0B1623;
  border: none;
  border-radius: 10px;
  padding: 10px 20px;
  font-weight: 600;
  transition: 0.3s ease;
}

button:hover,
.btn-primary:hover,
.submit-btn:hover {
  background-color: #FFD700;
  transform: translateY(-2px);
}

/* Reviews Section (fixed text color to white) */
.review-item {
  background: #F4B400;
  color: #000000; /* changed from dark to white */
  border-radius: 12px;
  padding: 15px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  margin-top: 15px;
  transition: 0.3s ease;
}

.review-item:hover {
  transform: translateY(-3px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

.review-stars {
  color: #F4B400;
}

.timestamp {
  font-size: 0.8rem;
  color: #000000;
}
  </style>
</head>
<body>

  <div class="container">
    <div class="card card-custom p-4">
      <h5><i class="bi bi-shield-exclamation icon"></i><span class="highlight">Report</span></h5>
      <p class="mt-3 mb-2">
        <i class="bi bi-flag-fill icon"></i> Report scam page /
        <i class="bi bi-star-fill icon"></i> Rate buyer & seller and verification page
      </p>

      <!-- Star Rating -->
      <div class="stars mb-2 text-center" id="stars">
        <i class="bi bi-star-fill" data-index="1"></i>
        <i class="bi bi-star-fill" data-index="2"></i>
        <i class="bi bi-star-fill" data-index="3"></i>
        <i class="bi bi-star-fill" data-index="4"></i>
        <i class="bi bi-star-fill" data-index="5"></i>
      </div>
      <div id="rating-value" class="text-center">No rating yet</div>

      <!-- Review Form -->
      <form id="reviewForm" class="mt-3">
        <div class="mb-3">
          <label for="review" class="form-label fw-semibold">Write a short review:</label>
          <textarea class="form-control" id="review" rows="3" placeholder="Share your experience..." required></textarea>
        </div>
        <button type="submit" class="btn btn-primary w-100">
          <i class="bi bi-send"></i> Submit Review
        </button>
      </form>

      <div class="note mt-3">
        <i class="bi bi-info-circle"></i>
        <span>Note: The verification is based on the rate the seller gets.</span>
      </div>

      <!-- Review List -->
      <div id="reviewList" class="mt-4">
        <h6 class="fw-bold"><i class="bi bi-chat-dots icon"></i> Recent Reviews</h6>
        <div id="reviewsContainer" class="mt-2">
          <p class="text-muted">No reviews yet. Be the first to leave one!</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Rating & Review Script with localStorage -->
  <script>
    const stars = document.querySelectorAll('#stars .bi-star-fill');
    const ratingValue = document.getElementById('rating-value');
    const reviewForm = document.getElementById('reviewForm');
    const reviewsContainer = document.getElementById('reviewsContainer');
    let selectedRating = 0;

    // Load reviews from localStorage on startup
    document.addEventListener('DOMContentLoaded', () => {
      const savedReviews = JSON.parse(localStorage.getItem('reviews')) || [];
      renderReviews(savedReviews);
    });

    // Handle star interactions
    stars.forEach((star, index) => {
      star.addEventListener('mouseover', () => highlightStars(index + 1));
      star.addEventListener('mouseout', () => highlightStars(selectedRating));
      star.addEventListener('click', () => {
        selectedRating = index + 1;
        highlightStars(selectedRating);
        ratingValue.textContent = `You rated ${selectedRating} star${selectedRating > 1 ? 's' : ''}`;
      });
    });

    function highlightStars(rating) {
      stars.forEach((star, i) => {
        star.classList.toggle('active', i < rating);
      });
    }

    // Handle form submission
    reviewForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const reviewText = document.getElementById('review').value.trim();

      if (selectedRating === 0) {
        alert("Please select a star rating before submitting.");
        return;
      }
      if (reviewText === "") {
        alert("Please write a short review before submitting.");
        return;
      }

      const timestamp = new Date().toLocaleString();
      const newReview = { rating: selectedRating, text: reviewText, time: timestamp };

      // Save to localStorage
      const savedReviews = JSON.parse(localStorage.getItem('reviews')) || [];
      savedReviews.unshift(newReview);
      localStorage.setItem('reviews', JSON.stringify(savedReviews));

      // Re-render reviews
      renderReviews(savedReviews);

      // Reset form
      selectedRating = 0;
      reviewForm.reset();
      highlightStars(0);
      ratingValue.textContent = "No rating yet";
    });

    // Render reviews from array
    function renderReviews(reviews) {
      if (reviews.length === 0) {
        reviewsContainer.innerHTML = '<p class="text-muted">No reviews yet. Be the first to leave one!</p>';
        return;
      }

      reviewsContainer.innerHTML = '';
      reviews.forEach(r => {
        const reviewDiv = document.createElement('div');
        reviewDiv.classList.add('review-item');
        const starsHTML = '<i class="bi bi-star-fill review-stars"></i>'.repeat(r.rating);
        reviewDiv.innerHTML = `
          <div class="d-flex justify-content-between align-items-center">
            <div>${starsHTML}</div>
            <span class="timestamp">${r.time}</span>
          </div>
          <p class="mt-2 mb-0">${r.text}</p>
        `;
        reviewsContainer.appendChild(reviewDiv);
      });
    }
  </script>
</body>
</html>
